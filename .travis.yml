language: python
matrix:
  include:
  - os: linux
    sudo: false
    dist: trusty
    python: '2.7'
  - os: linux
    sudo: false
    dist: trusty
    python: '3.4'
  - os: linux
    sudo: false
    dist: trusty
    python: '3.5'
  - os: osx
    language: generic
    env: TRAVIS_PYTHON_VERSION=3.5
before_install:
- wget https://raw.githubusercontent.com/Horta/travis-miniconda/master/install.sh
  -O install.sh
- chmod +x install.sh
- travis_retry bash -x ./install.sh
install:
- export PATH="$HOME/miniconda/bin:$PATH"
- source activate travisci
before_script:
- export PATH="$HOME/miniconda/bin:$PATH"
- source activate travisci
- python setup.py test
script:
- export PATH="$HOME/miniconda/bin:$PATH"
- source activate travisci
- python setup.py sdist
- pip install dist/`ls dist | grep -i -E '\.(gz)$' | head -1`
- pushd /
- python -c "import limix_tool; limix_tool.test()"
- popd
notifications:
  email: false
deploy:
  provider: pypi
  user: danilo.horta
  password:
    secure: WUzUIMfP+F95O9UBhfr+pZ6FyHTQ9Yy3ZqS5WQFLs5PcoBYmP9LJ9Eg+fd4LVMvRcneNAIoEfRNF8bfoRbSaxc+JrLdYQZtLGdQ+bY4/wrO9bCiz9LV6OfzTQI6mtsiMTkZFGhsXBBlStQgVSP5QKjMiOLvLQhwqMYMPlYlqtQP/GbEDQ2cha8ZSZ+hJc/stTW7OnA6s+gb4LwPUSmt+2zzWEB0wilYIdvENLwuIPY4fwp3mjhjta4yTc9gwr+/GuMkMZtDHnGdmw6FC2g+CcKJAkuiJQZQMMQ2JcvoxrwcHDRF54FH7k9Hj74pB4BpmDaerhpEVHZscKdj5XAr6+Ig3PR/O4GQm0F93D/TijZyxRk0qDPI1MCmL+pieoOnAjreKNzRXeQReWBIxPWO5lCUkkjz1yrDGCBkI8bCFrD12aYirfpbILCBS1l76fers8yYXfhlMvzxQD1SyA/tbGmhjqaiUAth8Lr3gibNqqIIFKTOLcu4GgBRbrjWlTHF4zKmYPmsdGmuG8oA+dF+dB6b4klbY4ZCMXoktY2ZdjjAB0g7VnsG6KGPhr/Bpb6o7hujrM3bVo/N14luxrmwRvFy9bSdPTqVpxuzwgGfjvXUsjYX6oEp9MLFkVM7yKVeYJmEexbT8da/2PeUMmiwKTQ/rKYR/cxH03vWtESSk8xc=
  on:
    distributions: sdist bdist_wheel
    repo: Horta/limix-tool
